<div class="row">
  <div class="col-sm-8 offset-sm-1">
    <div id="issue" class="card">
      <div class="card-body">
        <h5 class="card-title"><%= @team.name%></h5>
        <hr>
        <h6 class="card-subtitle mb-2 text-muted">Created : <%= time_ago_in_words(@team.created_at) %> ago</h6>  
        <hr>

        <div class="row align-content-center">
          <div class="col-xl-6">
          </div>
          <div class="col-xl-6">
            <% if can? :destroy, @team %>
                <%= link_to t('shared.delete'), team_path(@team), method: :delete, data: { confirm: t('shared.deletion_confirmation_message', resource: Team.model_name.human.downcase) }, class: 'btn btn-outline-danger float-right ml-2 my-1' %>
            <% end %>
            <% if can? :update, @team %>
                <%= link_to t('shared.edit'), edit_team_path(@team), {class: 'btn btn-outline-info card-button float-right ml-2 my-1',remote: true, 'data-toggle' =>  "modal", 'data-target' => '#model_window'} %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <br>
    <% if can? :new_user_for_team, @team %>
      <%= link_to t('teams.add_user'), new_user_for_team_team_path,{class: 'btn my-primary-btn',remote: true, 'data-toggle' =>  "modal", 'data-target' => '#model_add_member'}  %>
    <% end %>
  </div>
</div>
<br> 

<div class="row">
  <div class="col-md-8 offset-md-1">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <span class="nav-link active"><%= t('teams.users') %></span>
      </li>
    </ul>
    <br><br>
  </div>
</div>
<div class="row">
  <div class="col-md-8 offset-md-1">
      <% if @team.users.empty? %>
      <p> <%= t('users.no_user_to_show') %></p>
    <% else %>
      <table class="table text-center">
        <thead class="thead-light">
          <tr>
            <th><%= t(('shared.sq_num_field'), model: t('shared.user')) %></th>
            <th><%= t('shared.name_field') %></th>
            <th><%= t('users.role').capitalize() %></th>
            <th><%= t('shared.created_field') %></th>
            <th><%= t('shared.actions_field') %></th>
          </tr>
        </thead>
        <tbody>
          <% @team.users.each do |user|%>
            <tr>
              <td><%= user.sequence_num %></td>
              <td><%=user.name%></td>
              <td><%= user.role%></td>
              <td><%= time_ago_in_words(user.created_at) %> <%= t('shared.ago') %></td>
              <td>                
                <%= link_to user_path(user), class: 'btn btn-outline-info btn-sm card-button' do %>
                  <i class="fas fa-eye"></i>
                <% end %>
                <% if can? :remove_user_from_team, @team %>
                  <%= link_to remove_user_from_team_team_path(@team,user: user), method: :delete, class: 'btn btn-sm btn-outline-danger card-button' do %>
                    <i class="fas fa-trash-alt"></i>
                  <% end %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
  </div>
</div>
<div id = "model_add_member" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content"></div>
  </div>
</div>

<div id = "model_window" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content"></div>
  </div>
</div>